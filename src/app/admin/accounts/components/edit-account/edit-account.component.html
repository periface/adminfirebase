<button
  (click)="this.finished.emit(null)"
  mat-icon-button
  aria-label="icon-button with a heart icon"
>
  <mat-icon>arrow_back</mat-icon>
</button>
<span *ngIf="this.account" class="name"
  >{{ this.account.name }} {{ this.account.surname }}</span
>
<span *ngIf="!this.account" class="name">Crear usuario</span>
<form [formGroup]="form" (ngSubmit)="save()">
  <mat-tab-group>
    <mat-tab label="InformaciÃ³n">
      <div *ngIf="this.form" class="form-container">
        <div *ngIf="!this.account" class="form-field-container">
          <mat-form-field>
            <input
              matInput
              placeholder="Email"
              formControlName="email"
              required
            />
            <!-- <mat-error *ngIf="this.form.controls.email.invalid">{{
                          getErrorMessage('email')
                        }}</mat-error> -->
          </mat-form-field>
        </div>
        <div class="form-field-container">
          <mat-form-field>
            <input
              matInput
              placeholder="Nombre"
              formControlName="name"
              required
            />
            <!-- <mat-error *ngIf="this.form.controls.email.invalid">{{
                      getErrorMessage('email')
                    }}</mat-error> -->
          </mat-form-field>
        </div>
        <div class="form-field-container">
          <mat-form-field>
            <input
              matInput
              placeholder="Apellidos"
              formControlName="surname"
              required
            />
            <!-- <mat-error *ngIf="this.form.controls.password.invalid">{{
                      getErrorMessage('password')
                    }}</mat-error> -->
          </mat-form-field>
        </div>
        <div class="form-field-container">
          <mat-form-field>
            <input
              matInput
              placeholder="Telefono"
              formControlName="phoneNumber"
              type="tel"
            />
            <!-- <mat-error *ngIf="this.form.controls.password.invalid">{{
                        getErrorMessage('password')
                      }}</mat-error> -->
          </mat-form-field>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="Permisos">
      <div *ngIf="this.permissions.length" class="form-container checkbox">
        <mat-checkbox
          class="margin"
          *ngFor="let permission of permissions"
          (change)="setPermission($event, permission)"
          [checked]="checkPermission(permission)"
          >{{ permission.displayName }}</mat-checkbox
        >
      </div>
    </mat-tab>
  </mat-tab-group>
  <div class="form-field-container button-container">
    <button
      [disabled]="!this.form.valid || this.saving"
      type="submit"
      mat-raised-button
      color="primary"
    >
      Guardar
    </button>
  </div>
</form>
